{"mappings":"CAGoB,WAClB,MAAMA,EAAaC,SAASC,eAAe,cACrCC,EAAgBF,SAASC,eAAe,iBACxCE,EAAeH,SAASC,eAAe,gBACvCG,EAAkBJ,SAASC,eAAe,mBAsBhD,SAASI,IACPD,EAAgBE,MAAMC,QAAU,M,CAGlC,SAASC,IACPJ,EAAgBE,MAAMC,QAAU,M,CAGlC,SAASE,EAAUC,GACjBF,IACAL,EAAaQ,UAAY,GACzBR,EAAaS,YAAYF,GACzBX,EAAWO,MAAMC,QAAU,O,CAG7B,SAASM,IACPd,EAAWO,MAAMC,QAAU,M,CArCXP,SAASC,eAAe,WAEhCa,iBAAiB,SAoD3BC,eAAyBC,GAGvB,GAFAA,EAAMC,iBAEwB,QAA1BD,EAAME,OAAOC,SAAoB,CACnCd,IAEA,MAAMe,EAAkBJ,EAAME,OAAOG,GAErC,GADAC,QAAQC,IAAIH,GACRA,EAAiB,CACnB,MAAMI,EAAUJ,EAEhB,GAAII,EACF,IACE,MAAMC,QA/DhBV,eAAqCS,GACnC,MAAME,EAAc,sCAAqBF,6CAEzC,IACE,MAAMG,QAAiBC,MAAMF,GAE7B,IAAKC,EAASE,GACZ,MAAM,IAAIC,MAAM,qCAAqCN,KAIvD,aADmBG,EAASI,M,CAE5B,MAAOC,GACP,MAAM,IAAIF,MAAM,8BAA8BE,EAAMC,U,EAkDtBC,CAAsBV,GACxCd,EAAUV,SAASmC,cAAc,OACvCzB,EAAQC,UAAY,4FAGpBc,EAAUW,YACN,kCAAkCX,EAAUW,cAC5C,+FACQX,EAAUY,2IAGWZ,EAAUY,0FACsB,GAAGZ,EAAUa,eAAeC,SAAS,EAAE,4FACxCd,EAAUe,oHACMf,EAAUY,sEACnDZ,EAAUgB,OAC5CC,KAAI,EAACC,KAAEA,KACC,IAAIA,MAEZC,KAAK,KAAKC,oHAIRpB,EAAUqB,iJAGuCrB,EAAUJ,kGACVI,EAAUJ,4GAKlEZ,EAAUC,GAEV,MAAMqC,EAAW/C,SAASgD,cAAc,sBAClCC,EAAWjD,SAASgD,cAAc,sBAClCE,EAAW,CACfC,WAAW,GACXC,YAAY,IAGVC,aAAaC,QAAQ,kBACvBD,aAAaE,QAAQ,gBAAgBC,KAAKC,UAAUP,IAGtDH,EAASjC,iBAAiB,SAAS4C,IACjCR,EAASE,YAAYO,KAAKD,EAAME,cAAcC,QAAQC,OACtDT,aAAaE,QAAQ,gBAAgBC,KAAKC,UAAUP,GAAU,IAGhED,EAASnC,iBAAiB,SAAS4C,IACjCR,EAASC,WAAWQ,KAAKD,EAAME,cAAcC,QAAQE,OACrDV,aAAaE,QAAQ,gBAAgBC,KAAKC,UAAUP,GAAU,G,CAEhE,MAAOlB,GACPV,QAAQU,MAAM,oCAAqCA,E,CACpD,QACCxB,G,MAGFc,QAAQU,MAAM,0BACdxB,G,MAxFRN,EAAcY,iBAAiB,QAASD,GAExCmD,OAAOlD,iBAAiB,SAAS,SAAU4C,GACrCA,EAAMxC,SAAWnB,GACnBc,G,IAIJmD,OAAOlD,iBAAiB,WAAW,SAAU4C,GACzB,WAAdA,EAAMO,KACRpD,G,IAvDc,GAmJpBb,SAASc,iBAAiB,oBAAoB,WAAY","sources":["src/js/modal.js"],"sourcesContent":["const BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = 'df3d71dc2c14b1899746da6d2afcfb5b';\n\nconst modalModule = (function () {\n  const movieModal = document.getElementById('movieModal');\n  const closeModalBtn = document.getElementById('closeModalBtn');\n  const modalContent = document.getElementById('modalContent');\n  const loaderContainer = document.getElementById('loaderContainer');\n  const contentEl = document.getElementById('content');\n\n  contentEl.addEventListener('click', openModal);\n\n  async function fetchMovieDataFromAPI(movieId) {\n    const apiEndpoint = `${BASE_URL}/movie/${movieId}?api_key=${API_KEY}`;\n\n    try {\n      const response = await fetch(apiEndpoint);\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch movie data for ID ${movieId}`);\n      }\n\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      throw new Error(`Error fetching movie data: ${error.message}`);\n    }\n  }\n\n  function showLoader() {\n    loaderContainer.style.display = 'flex';\n  }\n\n  function hideLoader() {\n    loaderContainer.style.display = 'none';\n  }\n\n  function showModal(content) {\n    hideLoader();\n    modalContent.innerHTML = '';\n    modalContent.appendChild(content);\n    movieModal.style.display = 'block';\n  }\n\n  function hideModal() {\n    movieModal.style.display = 'none';\n  }\n\n  closeModalBtn.addEventListener('click', hideModal);\n\n  window.addEventListener('click', function (event) {\n    if (event.target === movieModal) {\n      hideModal();\n    }\n  });\n\n  window.addEventListener('keydown', function (event) {\n    if (event.key === 'Escape') {\n      hideModal();\n    }\n  });\n\n  async function openModal(event) {\n    event.preventDefault();\n\n    if (event.target.nodeName === 'IMG') {\n      showLoader();\n\n      const targetMovieLink = event.target.id;\n      console.log(targetMovieLink);\n      if (targetMovieLink) {\n        const movieId = targetMovieLink;\n\n        if (movieId) {\n          try {\n            const movieData = await fetchMovieDataFromAPI(movieId);\n            const content = document.createElement('div');\n            content.innerHTML = `<div class=\"modal-popup\">\n            <div class=\"movie-poster\">\n            <img src=\"${\n            movieData.poster_path\n              ? `https://image.tmdb.org/t/p/w500${movieData.poster_path}`\n              : 'https://static.wikia.nocookie.net/ideas/images/6/66/FoxAndroidTM2%27s_No_Poster.jpg'\n              }\" alt=\"${movieData.title}\" class=\"modal-poster\" />\n            </div>\n            <div class=\"movie-details\">\n              <h2 class=\"title main-title\">${movieData.title}</h2>\n              <p><span class=\"categ\">Vote / Votes </span><span class=\"val\">${`${movieData.vote_average}`.padStart(0,'0')}</span></p>\n              <p><span class=\"categ\">Popularity</span><span class=\"val\">${  movieData.popularity}</span></p>\n              <p class=\"title\"><span class=\"categ\">Original Title</span><span class=\"val\">${movieData.title}</span></p>\n              <p><span class=\"categ\">Genre</span>${movieData.genres\n                .map(({ name }) => {\n                  return ` ${name}`;\n                })\n                .join(',').trim()}</span></p>\n              \n              <div class=\"abt\">\n              <p>ABOUT</p>\n              <p>${movieData.overview}</p>\n              </div>\n              <div class=\"button-div\">\n                <button class=\"modal-button btn-page\" data-watch=\"${movieData.id}\">ADD TO WATCHED</button>\n                <button class=\"modal-button btn-page\" data-queue=\"${movieData.id}\">ADD TO QUEUE</button>\n              </div>\n              </div>\n              </div>\n            `;\n            showModal(content);\n\n            const btnWatch = document.querySelector('button[data-watch]');\n            const btnQueue = document.querySelector('button[data-queue]');\n            const dataLoad = {\n              dataQueued:[],\n              dataWatched:[],\n            };\n\n            if(!localStorage.getItem('SAVED_CURRENT')){\n              localStorage.setItem('SAVED_CURRENT',JSON.stringify(dataLoad));\n            }\n            \n            btnWatch.addEventListener('click',(event)=>{\n              dataLoad.dataWatched.push(event.currentTarget.dataset.watch)\n              localStorage.setItem('SAVED_CURRENT',JSON.stringify(dataLoad));\n            })\n\n            btnQueue.addEventListener('click',(event)=>{\n              dataLoad.dataQueued.push(event.currentTarget.dataset.queue)\n              localStorage.setItem('SAVED_CURRENT',JSON.stringify(dataLoad));\n            });\n          } catch (error) {\n            console.error('Error fetching movie information:', error);\n          } finally {\n            hideLoader();\n          }\n        } else {\n          console.error('Movie ID is undefined.');\n          hideLoader();\n        }\n      }\n    }\n  }\n\n  return {\n    showLoader,\n    hideLoader,\n    showModal,\n    hideModal,\n  };\n})();\n\ndocument.addEventListener('DOMContentLoaded', function () {});\n"],"names":["movieModal","document","getElementById","closeModalBtn","modalContent","loaderContainer","showLoader","style","display","hideLoader","showModal","content","innerHTML","appendChild","hideModal","addEventListener","async","event1","preventDefault","target","nodeName","targetMovieLink","id","console","log","movieId","movieData","apiEndpoint","response","fetch","ok","Error","json","error","message","fetchMovieDataFromAPI","createElement","poster_path","title","vote_average","padStart","popularity","genres","map","name","join","trim","overview","btnWatch","querySelector","btnQueue","dataLoad","dataQueued","dataWatched","localStorage","getItem","setItem","JSON","stringify","event","push","currentTarget","dataset","watch","queue","window","key"],"version":3,"file":"index.954f94ae.js.map"}