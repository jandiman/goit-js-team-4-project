{"mappings":"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","sources":["src/js/modal.js"],"sourcesContent":["const BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = 'df3d71dc2c14b1899746da6d2afcfb5b';\n\nconst modalModule = (function () {\n  const movieModal = document.getElementById('movieModal');\n  const closeModalBtn = document.getElementById('closeModalBtn');\n  const modalContent = document.getElementById('modalContent');\n  const loaderContainer = document.getElementById('loaderContainer');\n  const contentEl = document.getElementById('content');\n\n  contentEl.addEventListener('click', openModal);\n\n  async function fetchMovieDataFromAPI(movieId) {\n    const apiEndpoint = `${BASE_URL}/movie/${movieId}?api_key=${API_KEY}`;\n\n    try {\n      const response = await fetch(apiEndpoint);\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch movie data for ID ${movieId}`);\n      }\n\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      throw new Error(`Error fetching movie data: ${error.message}`);\n    }\n  }\n\n  function showLoader() {\n    loaderContainer.style.display = 'flex';\n  }\n\n  function hideLoader() {\n    loaderContainer.style.display = 'none';\n  }\n\n  function showModal(content) {\n    hideLoader();\n    modalContent.innerHTML = '';\n    modalContent.appendChild(content);\n    movieModal.style.display = 'block';\n  }\n\n  function hideModal() {\n    movieModal.style.display = 'none';\n  }\n\n  closeModalBtn.addEventListener('click', hideModal);\n\n  window.addEventListener('click', function (event) {\n    if (event.target === movieModal) {\n      hideModal();\n    }\n  });\n\n  window.addEventListener('keydown', function (event) {\n    if (event.key === 'Escape') {\n      hideModal();\n    }\n  });\n\n  async function openModal(event) {\n    event.preventDefault();\n\n    if (event.target.nodeName === 'IMG') {\n      showLoader();\n\n      const targetMovieLink = event.target.id;\n      console.log(targetMovieLink);\n      if (targetMovieLink) {\n        const movieId = targetMovieLink;\n\n        if (movieId) {\n          try {\n            const movieData = await fetchMovieDataFromAPI(movieId);\n            const content = document.createElement('div');\n            content.innerHTML = `<div class=\"modal-popup\">\n            <div class=\"movie-poster\">\n            <img src=\"${\n            movieData.poster_path\n              ? `https://image.tmdb.org/t/p/w500${movieData.poster_path}`\n              : 'https://static.wikia.nocookie.net/ideas/images/6/66/FoxAndroidTM2%27s_No_Poster.jpg'\n              }\" alt=\"${movieData.title}\" class=\"modal-poster\" />\n            </div>\n            <div class=\"movie-details\">\n              <h2 class=\"title main-title\"><a href=\"${movieData.homepage}\" target=\"_target\" class=\"link page\">${movieData.title}</a></h2>\n              <p><span class=\"categ\">Vote / Votes </span><span class=\"val\">${`${movieData.vote_average}`.padStart(0,'0')}</span></p>\n              <p><span class=\"categ\">Popularity</span><span class=\"val\">${  movieData.popularity}</span></p>\n              <p class=\"title\"><span class=\"categ\">Original Title</span><span class=\"val\">${movieData.title}</span></p>\n              <p><span class=\"categ\">Genre:</span><span class=\"genre-list\">${movieData.genres\n                .map(({ name }) => {\n                  return ` ${name}`;\n                })\n                .join(',').trim()}</span></p>\n              \n              <div class=\"abt\">\n              <p>ABOUT</p>\n              <p>${movieData.overview}</p>\n              </div>\n              <div class=\"button-div\">\n                <button class=\"modal-button btn-page\" data-watch=\"${movieData.id}\">ADD TO WATCHED</button>\n                <button class=\"modal-button btn-page\" data-queue=\"${movieData.id}\">ADD TO QUEUE</button>\n              </div>\n              </div>\n              </div>\n            `;\n            showModal(content);\n\n            const btnWatch = document.querySelector('button[data-watch]');\n            const btnQueue = document.querySelector('button[data-queue]');\n            \n\n            if(!localStorage.getItem('SAVED_CURRENT')){\n              localStorage.setItem('SAVED_CURRENT',JSON.stringify({\n                dataQueued:[],\n                dataWatched:[],\n              }));\n              return;\n            }\n            const dataLoad = JSON.parse(localStorage.getItem('SAVED_CURRENT'));\n            dataLoad.dataQueued.map(el => {\n              console.log('element:',el);\n              if(el === movieId){\n                btnQueue.textContent = 'added to Queued';\n                btnQueue.classList.add('active');\n              }\n            })\n            dataLoad.dataWatched.map(el => {\n              console.log('element:',el);\n              if(el === movieId){\n                btnWatch.textContent = 'added to watched';\n                btnWatch.classList.add('active');   \n              }\n            })\n            \n            btnWatch.addEventListener('click',(event)=>{\n              const id = event.currentTarget.dataset.watch;\n              for (const data of dataLoad.dataWatched) {\n                if(data === id){\n                  dataLoad.dataWatched.splice(dataLoad.dataWatched.indexOf(data),1);\n                  event.currentTarget.textContent = 'add to Watched';\n                  event.currentTarget.classList.remove('active');\n                  localStorage.setItem('SAVED_CURRENT',JSON.stringify(dataLoad));\n                  return;\n                }\n              }\n              dataLoad.dataWatched.push(id);\n              event.currentTarget.textContent = 'added to Watched';\n              event.currentTarget.classList.add('active');\n              localStorage.setItem('SAVED_CURRENT',JSON.stringify(dataLoad));\n\n              if(dataLoad.dataPage === 'home'){\n                console.log('HOME PAGE');\n                return;\n              }\n              console.log('LIBRARY PAGE');\n            })\n\n            btnQueue.addEventListener('click',(event)=>{\n              const id = event.currentTarget.dataset.queue;\n              for (const data of dataLoad.dataQueued) {\n                if(data === id){\n                  dataLoad.dataQueued.splice(dataLoad.dataQueued.indexOf(data),1);\n                  event.currentTarget.textContent = 'add to Queued';\n                  event.currentTarget.classList.remove('active');\n                  localStorage.setItem('SAVED_CURRENT',JSON.stringify(dataLoad));\n                  return;\n                }\n              }\n              dataLoad.dataQueued.push(id);\n              event.currentTarget.textContent = 'added to Queued';\n              event.currentTarget.classList.add('active');\n              localStorage.setItem('SAVED_CURRENT',JSON.stringify(dataLoad));\n              \n              if(dataLoad.dataPage === 'home'){\n                console.log('HOME PAGE');\n                return;\n              }\n              console.log('LIBRARY PAGE');\n            });\n          } catch (error) {\n            console.error('Error fetching movie information:', error);\n          } finally {\n            hideLoader();\n          }\n        } else {\n          console.error('Movie ID is undefined.');\n          hideLoader();\n        }\n      }\n    }\n  }\n\n  return {\n    showLoader,\n    hideLoader,\n    showModal,\n    hideModal,\n  };\n})();\n\n"],"names":["$bpxeT","parcelRequire","$40873ecf3c18e122$var$BASE_URL","$40873ecf3c18e122$var$API_KEY","movieModal","document","getElementById","closeModalBtn","modalContent","loaderContainer","fetchMovieDataFromAPI","movieId","_fetchMovieDataFromAPI","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","apiEndpoint","response","data","concat","fetch","_ctx","sent","ok","Error","json","t0","message","showLoader","style","display","hideLoader","showModal","content","innerHTML","appendChild","hideModal","_openModal","event1","targetMovieLink","movieData","btnWatch","btnQueue","dataLoad","preventDefault","target","nodeName","id","console","log","createElement","poster_path","title","homepage","vote_average","padStart","popularity","genres","map","param","name","join","trim","overview","querySelector","localStorage","getItem","setItem","JSON","stringify","dataQueued","dataWatched","parse","el","textContent","classList","add","addEventListener","event","currentTarget","dataset","watch","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","splice","indexOf","remove","err","return","push","dataPage","queue","error","window","key"],"version":3,"file":"index.4c3a1f91.js.map"}